const webpack = require('webpack')
const ExtractTextPlugin = require('extract-text-webpack-plugin')
const path = require('path')

module.exports = {
   entry: './src/index.jsx',
   output: {
      path: __dirname + '/dist',
      filename: './app.js'
   },
   devServer: {
      port: 8080,
      contentBase: './dist'
   },
   resolve: {
      extensions: ['.js', '.jsx'],
      // modules: [
      //    path.resolve(__dirname), "node_modules"
      // ],
      alias: {
         modules: path.join(__dirname, '/node_modules')
      }
   },
   plugins: [
      new ExtractTextPlugin('app.css'),
      new webpack.optimize.ModuleConcatenationPlugin(),
      new webpack.ProvidePlugin({
         $: 'jquery',
         jQuery: 'jquery',
         'window.jQuery': 'jquery',
         Popper: ['popper.js', 'default']
      }),
   ],
   module: {
      loaders: [{
         test: /.js[x]?$/,
         loader: 'babel-loader',
         exclude: /node_modules/
      }, {
         test: /\.(scss|css)$/,
         use: ExtractTextPlugin.extract({
            fallback: 'style-loader',
            use: [{
               loader: 'css-loader',
               options: { sourceMap: true }
            }, {
               loader: 'sass-loader',
               options: { sourceMap: true }
            }]
         })
      }, {
         test: /\.(woff|woff2|eot|ttf|svg|gif|jpg|png)$/,
         loader: 'file-loader'
      }]
   }
}