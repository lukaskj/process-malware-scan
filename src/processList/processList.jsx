import React from 'react'
import { connect } from 'react-redux'
import { bindActionCreators } from 'redux'
import { getProcessList } from './processListActions'



class ProcessList extends React.Component {
   constructor(props) {
      super(props)
      this.state = { list: [] }
   }

   componentWillMount() {
      // this.setCurrentList([])
      this.props.getProcessList()
   }

   render() {
      return (
         <table className="table table-bordered">
            <thead>
               <tr>
                  <th scope="col">Process</th>
                  <th scope="col">Running</th>
                  <th scope="col">Actions</th>
               </tr>
            </thead>
            <tbody>
               {this.props.list.map(p => {
                     if (!this.props.searchText || p.filename.toLowerCase().indexOf(this.props.searchText.toLowerCase()) >= 0)
                     return (
                        <tr key={p.hash}>
                           <td scope="col" key={p.hash} className="align-middle">{p.filename}</td> 
                           <td style={{fontSize: '2em', textAlign: 'center', padding: 0}}><i className={`fa ${p.running ? 'fa-check-circle' : 'fa-times-circle'}`}></i></td>
                           <td style={{}}><button className="btn btn-primary btn-sm">Send</button></td>
                        </tr>
                     )
                  }
               )}
            </tbody>
         </table>
      )
   }
}

const mapStateToProps = globalState => ({
   searchText: globalState.search.text,
   list: globalState.processList.list
})

const mapActionsToProps = dispatch => bindActionCreators({ getProcessList }, dispatch)

export default connect(mapStateToProps, mapActionsToProps)(ProcessList)