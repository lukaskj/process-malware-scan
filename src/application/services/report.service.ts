import { OutputJson } from "@domain/interfaces/output-json.interface";
import { FLAG_REPLACE, REPORT_HTML } from "@interface/report/report";
import { writeFile } from "fs/promises";
import { resolve } from "path";
import { Service } from "typedi";

@Service()
export class ReportService {
  constructor() {}

  public async generateReport(results: OutputJson): Promise<void> {
    const reportFileName = "report.html";
    const reportHtml = REPORT_HTML.replace(FLAG_REPLACE, JSON.stringify(results));

    await writeFile(reportFileName, reportHtml);
    console.log("[+] Report generated at: ", resolve(reportFileName));
  }
}
